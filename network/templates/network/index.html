{% extends "network/layout.html" %}

{% block body %}
    <div class="container-fluid">
        <h1 class="display-4">All Posts</h1>
        <div>
            {% if user.is_authenticated %}
                <form method="post">
                    {% csrf_token %}
                    <div class="border my-3 p-3">
                        <h4><strong>New Post</strong></h4>
                        <textarea class="form-control" name="new-post" id="new-post-form" cols="30" rows="5" required></textarea>
                        <input type="submit" value="Post" class="btn btn-primary mt-2">
                    </div>
                </form>
            {% endif %}
            {% for post in posts %}
                <div class="border my-3 p-3">
                    <h4><a href="{% url 'profile' post.poster %}">{{ post.poster }}</a></h4>
                    {% if user.is_authenticated and user == post.poster %}
                        <a href="#" class="btn btn-link m-0 p-0">Edit</a>
                    {% endif %}
                    <p>{{ post.body}} </p>
                    <p class="text-muted">{{ post.date_time }}</p>
                    <p>
                        <a 
                            href="javascript:void(0)" 
                            uk-icon="heart"
                            style="color:blue" 
                            {% if user.is_authenticated and user in post.likes.all %}class="liked-btn"{% endif %}
                            >
                        </a>
                        {{ post.likes.count }}
                    </p>
                    
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}